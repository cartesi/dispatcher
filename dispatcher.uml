@startuml
participant "Dispatcher" as D
participant "Conf. File" as CF
participant "State Manager" as SM
participant "Tx Manager" as TM
participant "DApp Callback" as DC
participant "File/Emulator" as others
D -> CF : Get contracts and addresses
CF -> D : List (contract, address)
D -> SM : Get relevant instances
note right
  For each contract, obtain
  instances involving user.
  For each instance, obtain
  current and ancestor nonce
end note
SM -> D : List (contract, instace)

D -> TM : Check pending instances
note right
  For each instance, verify
  with the transaction manager
  what is already being treated
end note
TM -> D : List (pending)
D -> DC : Get reaction to instance
note right
  For each instance that requires
  a response, get the appropriate
  transactions
end note
activate DC
DC -> others : Downloads and Emulations
others -> DC : Results from emulations
DC -> D : Transaction to be submitted
deactivate DC
D -> TM : Submit transaction
@enduml
